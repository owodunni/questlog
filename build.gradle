
task venv(type: Exec) {
    commandLine "python3", "-m", "venv", ".venv"
}

task activate(type: Exec) {
    dependsOn venv
    commandLine "source", ".venv/bin/activate"
}

task pip(type: Exec) {
    workingDir projectDir
    def reqs = [
            file("project-requirements.txt"),]

    inputs.files reqs

    def args = ["pip", "install"]

    reqs.each { req ->
        args += ["-r", req]
    }
    commandLine args
}

task preCommit(type: Exec) {
    dependsOn pip
    commandLine "pre-commit",
            "install",
            "--hook-type",
            "commit-msg"
}

task initialize(){
    dependsOn pip, preCommit
}